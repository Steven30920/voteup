webpackJsonp([1],{"0pd7":function(t,n,e){"use strict";var o=e("J+oA");n.a={name:"list",components:{VoteOption:o.a},computed:{options:function(){return this.$store.state.vote.options}},created:function(){this.$store.dispatch({type:"loadOptions"}),this.$store.dispatch({type:"loadVotes"})}}},"47xB":function(t,n){},"7zPv":function(t,n,e){"use strict";n.a={name:"result"}},BBEb:function(t,n,e){"use strict";function o(t){e("47xB")}var s=e("IY4k"),i=e("k+Ls"),a=e("VU/8"),r=o,c=a(s.a,i.a,!1,r,"data-v-1bae885a",null);n.a=c.exports},"D+VX":function(t,n,e){"use strict";var o={isAuthenticated:!1,currentUser:""},s={login:function(t,n){var e=n.username;t.isAuthenticated=!0,t.currentUser=e}};n.a={state:o,mutations:s}},DMyz:function(t,n,e){"use strict";var o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"result"},[e("h1",[t._v("68%")]),t._v(" "),e("svg",{attrs:{width:"100",height:"100",viewBox:"0 0 32 32"}},[e("circle",{attrs:{id:"background",r:"16",cx:"16",cy:"16",fill:"#fff",stroke:"yellow","stroke-width":"12"}}),t._v(" "),e("circle",{attrs:{id:"percent",r:"16",cx:"16",cy:"16",fill:"#fff","fill-opacity":"0.5",stroke:"deeppink","stroke-width":"12","stroke-dasharray":"68 100"}})]),t._v(" "),e("h1",[t._v("32%")]),t._v(" "),e("svg",{attrs:{width:"100",height:"100",viewBox:"0 0 32 32"}},[e("circle",{attrs:{id:"background",r:"16",cx:"16",cy:"16",fill:"#fff",stroke:"yellow","stroke-width":"12"}}),t._v(" "),e("circle",{attrs:{id:"percent",r:"16",cx:"16",cy:"16",fill:"#fff","fill-opacity":"0.5",stroke:"deeppink","stroke-width":"12","stroke-dasharray":"32 100"}})])])},s=[],i={render:o,staticRenderFns:s};n.a=i},FcqW:function(t,n,e){"use strict";n.a={name:"vote-option",props:["option","allVotes"],computed:{votes:function(){var t=this;return this.$store.state.vote.votes.filter(function(n){return n.optionId==t.option.id})},voted:function(){var t=this;return this.votes.filter(function(n){return n.voter===t.currentUser}).length},currentUser:function(){return this.$store.state.auth.currentUser}},methods:{undo:function(){var t=this,n=this.votes.find(function(n){return n.voter===t.currentUser});console.log("undo",n.id),this.$store.dispatch({type:"undo",voteId:n.id})},voteup:function(){if(!this.voted&&this.currentUser){var t={voter:this.currentUser,optionId:this.option.id};this.$store.dispatch({type:"voteup",vote:t})}}}}},Fs8J:function(t,n,e){"use strict";var o=e("gosb"),s=e("BBEb"),i=e("tcnj"),a=e("N/0d");n.a={name:"home",data:function(){return{msg:"Welcome to Your Vue.js App"}},components:{LoginForm:o.a,NewOption:s.a,List:i.a,Result:a.a}}},IY4k:function(t,n,e){"use strict";n.a={name:"new-option",data:function(){return{text:""}},methods:{addOption:function(){console.log(this.text),this.$store.dispatch({type:"addOption",text:this.text}),this.text=""}}}},IaBt:function(t,n){},IcnI:function(t,n,e){"use strict";var o=e("7+uW"),s=e("NYxO"),i=e("D+VX"),a=e("QFJm");o.a.use(s.a),n.a=new s.a.Store({modules:{auth:i.a,vote:a.a}})},"J+oA":function(t,n,e){"use strict";function o(t){e("JEMR")}var s=e("FcqW"),i=e("qVAE"),a=e("VU/8"),r=o,c=a(s.a,i.a,!1,r,"data-v-5134135e",null);n.a=c.exports},JEMR:function(t,n){},M93x:function(t,n,e){"use strict";function o(t){e("XVee")}var s=e("xJD8"),i=e("oNiQ"),a=e("VU/8"),r=o,c=a(s.a,i.a,!1,r,null,null);n.a=c.exports},"N/0d":function(t,n,e){"use strict";function o(t){e("IaBt")}var s=e("7zPv"),i=e("DMyz"),a=e("VU/8"),r=o,c=a(s.a,i.a,!1,r,"data-v-17b5bc6f",null);n.a=c.exports},NHnr:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("7+uW"),s=e("M93x"),i=e("IcnI");o.a.config.productionTip=!1,new o.a({el:"#app",store:i.a,template:"<App/>",components:{App:s.a}})},OoJv:function(t,n,e){"use strict";var o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"list"},t._l(t.options,function(t){return e("div",{staticClass:"option"},[e("vote-option",{attrs:{option:t}})],1)}))},s=[],i={render:o,staticRenderFns:s};n.a=i},QFJm:function(t,n,e){"use strict";var o=e("mtWM"),s=e.n(o),i={options:[],votes:[]},a={addOption:function(t,n){t.options.push(n)},loadOptions:function(t,n){t.options=n.options},loadVotes:function(t,n){var e=n.votes;t.votes=e},voteup:function(t,n){console.log("mutaion",n),t.votes.push(n)},undo:function(t,n){console.log("mutations",n),t.votes=t.votes.filter(function(t){return t.id!==n})}},r={undo:function(t,n){var e=t.commit,o=n.voteId;console.log(o),s.a.delete("http://localhost:3008/votes/"+o).then(function(t){console.log(t.data),e("undo",o)})},addOption:function(t,n){var e=t.commit,o=n.text,i={text:o};s.a.post("http://localhost:3008/options",i).then(function(t){console.log(t.data),e("addOption",t.data)})},loadOptions:function(t){var n=t.commit;s.a.get("http://localhost:3008/options").then(function(t){console.log(t.data),n("loadOptions",{options:t.data})})},loadVotes:function(t){var n=t.commit;s.a.get("http://localhost:3008/votes").then(function(t){console.log(t.data),n("loadVotes",{votes:t.data})})},voteup:function(t,n){var e=t.commit,o=n.vote;console.log("action",o),s.a.post("http://localhost:3008/votes",o).then(function(t){console.log(t.data),e("voteup",t.data)})}};n.a={state:i,mutations:a,actions:r}},XVee:function(t,n){},YTGM:function(t,n,e){"use strict";var o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"home"},[e("div",{staticClass:"wrap"},[e("login-form")],1),t._v(" "),e("div",{staticClass:"wrap"},[e("list")],1),t._v(" "),e("div",{staticClass:"wrap"},[e("new-option")],1),t._v(" "),e("div",{staticClass:"wrap"},[e("result")],1)])},s=[],i={render:o,staticRenderFns:s};n.a=i},b39Z:function(t,n){},cpOb:function(t,n,e){"use strict";var o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"login-form"},[t.isAuthenticated?e("div",[t._v("\n    我是 "+t._s(t.currentUser)+"\n  ")]):e("div",[t._v("\n    你是\n    "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],domProps:{value:t.username},on:{input:function(n){n.target.composing||(t.username=n.target.value)}}}),t._v(" "),e("button",{on:{click:t.login}},[t._v("保存")])])])},s=[],i={render:o,staticRenderFns:s};n.a=i},gosb:function(t,n,e){"use strict";function o(t){e("qrPK")}var s=e("pFqp"),i=e("cpOb"),a=e("VU/8"),r=o,c=a(s.a,i.a,!1,r,"data-v-52b45d6b",null);n.a=c.exports},"k+Ls":function(t,n,e){"use strict";var o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"new-option"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],domProps:{value:t.text},on:{input:function(n){n.target.composing||(t.text=n.target.value)}}}),t._v(" "),e("button",{on:{click:t.addOption}},[t._v("添加")])])},s=[],i={render:o,staticRenderFns:s};n.a=i},lO7g:function(t,n,e){"use strict";function o(t){e("b39Z")}var s=e("Fs8J"),i=e("YTGM"),a=e("VU/8"),r=o,c=a(s.a,i.a,!1,r,"data-v-34a5029e",null);n.a=c.exports},oNiQ:function(t,n,e){"use strict";var o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"app"}},[e("home")],1)},s=[],i={render:o,staticRenderFns:s};n.a=i},pFqp:function(t,n,e){"use strict";n.a={name:"login-form",methods:{login:function(){this.username.trim()&&(this.$store.commit("login",{username:this.username}),this.username="")}},data:function(){return{username:""}},computed:{isAuthenticated:function(){return this.$store.state.auth.isAuthenticated},currentUser:function(){return this.$store.state.auth.currentUser}}}},qVAE:function(t,n,e){"use strict";var o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"option"},[e("div",{staticClass:"title"},[e("div",{staticClass:"text"},[t._v("\n      "+t._s(t.option.text)+"\n    ")])]),t._v(" "),e("div",{staticClass:"votes"},t._l(t.votes,function(n){return e("div",{staticClass:"vote"},[t._v("\n      "+t._s(n.voter)+"\n    ")])})),t._v(" "),e("div",{staticClass:"action"},[t.voted?e("div",[e("button",{staticClass:"vote-btn voted",on:{click:t.undo}},[t._v("已投")])]):e("div",[e("button",{staticClass:"vote-btn",on:{click:t.voteup}},[t._v("投票")])])])])},s=[],i={render:o,staticRenderFns:s};n.a=i},qrPK:function(t,n){},tcnj:function(t,n,e){"use strict";var o=e("0pd7"),s=e("OoJv"),i=e("VU/8"),a=i(o.a,s.a,!1,null,null,null);n.a=a.exports},xJD8:function(t,n,e){"use strict";var o=e("lO7g");n.a={name:"app",components:{Home:o.a}}}},["NHnr"]);
//# sourceMappingURL=app.d877abbf3cf6ebee1364.js.map